import{r,c as a,g as h}from"./index-e2c2285b-c4441d08.js";const d=class{constructor(t){r(this,t),this.change=a(this,"change",3),this.isCurrentlyFocused=!1,this.eventList=["mousedown","dragstart","touchstart"],this.handler=e=>{const s=this.shadowContains(this.findActiveElement()),n=this.shadowContains(this.shadowEventTarget(e))||this.originatesInSlots(e.target);if(!n&&(this.isCurrentlyFocused||s)){this.isCurrentlyFocused=!1,this.change.emit();return}this.isCurrentlyFocused=n}}connectedCallback(){this.eventList.forEach(t=>{document.addEventListener(t,this.handler)})}disconnectedCallback(){this.eventList.forEach(t=>{document.removeEventListener(t,this.handler)})}findActiveElement(t=document.activeElement){return t.shadowRoot?this.findActiveElement(t.shadowRoot.activeElement):t}shadowEventTarget(t){return t.composedPath()[0]??t.target}shadowContains(t){return t===this.hostElement||t!==void 0&&this.shadowContains(t.parentNode||t.host)}originatesInSlots(t){const e=this.hostElement.querySelectorAll("slot");for(let s=0;s<e.length;s++){const i=e[s].assignedNodes();for(let o=0;o<i.length;o++)if(i[o].contains(t))return!0}return!1}get hostElement(){return h(this)}};export{d as protean_click_elsewhere};
